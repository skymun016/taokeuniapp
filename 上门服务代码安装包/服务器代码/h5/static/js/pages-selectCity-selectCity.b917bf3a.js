(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-selectCity-selectCity"],{"117a":function(t,i,e){"use strict";e.r(i);var a=e("e6de"),n=e.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},"24cb":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var a={tuiIcon:e("ce6a").default},n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page"},[e("v-uni-scroll-view",{staticClass:"scrollList",style:{height:t.winHeight+"px"},attrs:{"scroll-y":!0,"scroll-into-view":t.scrollViewId}},[e("v-uni-view",{staticClass:"search-bar"},[e("v-uni-view",{staticClass:"search-bar-form"},[e("v-uni-view",{staticClass:"search-bar-box"},[e("v-uni-input",{staticClass:"search-bar-input",attrs:{"confirm-type":"search",placeholder:"输入城市名称或首字母查询","placeholder-class":"phcolor",value:t.inputVal,focus:t.inputShowed},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.inputTyping.apply(void 0,arguments)}}}),t.inputVal?e("v-uni-view",{staticClass:"icon-clear",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clearInput.apply(void 0,arguments)}}},[e("tui-icon",{attrs:{name:"close-fill",size:16,color:"#bfbfbf"}})],1):t._e()],1),t.inputShowed?t._e():e("v-uni-label",{staticClass:"search-bar-label",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showInput.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"search-bar-text"},[t._v("输入城市名称或首字母查询")])],1)],1)],1),t.inputShowed?e("v-uni-view",{staticClass:"tui-list search-result"},t._l(t.searchResult,(function(i,a){return e("v-uni-view",{key:a,staticClass:"tui-list-cell",attrs:{"hover-class":"tui-list-cell-hover","data-name":i,"hover-stay-time":150},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectCity.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"tui-list-cell-navigate"},[t._v(t._s(i))])],1)})),1):t._e(),t.inputVal?t._e():e("v-uni-view",[e("v-uni-view",{staticClass:"current-city"},[e("v-uni-view",{staticClass:"title"},[t._v("定位城市")]),e("v-uni-view",{staticClass:"city-name",attrs:{"data-name":t.cityName},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectCity.apply(void 0,arguments)}}},[e("tui-icon",{attrs:{name:"position-fill",color:"#5677fc",size:18}}),t._v(t._s(t.cityName))],1)],1),e("v-uni-view",{staticClass:"hot-city"},[e("v-uni-view",{staticClass:"title"},[t._v("热门城市")]),e("v-uni-view",{staticClass:"city-names"},t._l(t.hotCity,(function(i,a){return e("v-uni-view",{key:a,staticClass:"city-name-item",attrs:{"hover-class":"tap-city","hover-stay-time":150,"data-name":i},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectCity.apply(void 0,arguments)}}},[t._v(t._s(i))])})),1)],1),e("v-uni-view",{staticClass:"tui-list city-list"},[t._l(t.lists,(function(i,a){return i.data[0]?[e("v-uni-view",{key:a+"_0",staticClass:"tui-list-cell-divider",attrs:{id:0===a?"suoyin":i.letter}},[t._v(t._s(i.letter))]),t._l(i.data,(function(n,o){return e("v-uni-view",{key:o+"_"+a+"_1",staticClass:"tui-list-cell",attrs:{"hover-class":"tui-list-cell-hover","data-name":n.cityName,"hover-stay-time":150},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectCity.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"tui-list-cell-navigate",class:[i.data.length-1==a?"last":""]},[t._v(t._s(n.cityName))])],1)}))]:t._e()}))],2)],1)],1),t.inputVal?t._e():e("v-uni-view",{staticClass:"tui-indexed-list-bar",style:{height:t.indexBarHeight+"px"},on:{touchstart:function(i){arguments[0]=i=t.$handleEvent(i),t.touchStart.apply(void 0,arguments)},touchmove:function(i){i.stopPropagation(),i.preventDefault(),arguments[0]=i=t.$handleEvent(i),t.touchMove.apply(void 0,arguments)},touchend:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.touchEnd.apply(void 0,arguments)},touchcancel:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.touchCancel.apply(void 0,arguments)}}},t._l(t.lists,(function(i,a){return e("v-uni-text",{key:a,staticClass:"tui-indexed-list-text",style:{height:t.indexBarItemHeight+"px"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleClick(a)}}},[t._v(t._s(0==a?"索引":i.letter))])})),1),t.touchmove&&t.lists[t.touchmoveIndex].letter?e("v-uni-view",{staticClass:"tui-indexed-list-alert"},[t._v(t._s(t.lists[t.touchmoveIndex].letter))]):t._e()],1)},o=[]},"3d22":function(t,i,e){"use strict";e.r(i);var a=e("24cb"),n=e("117a");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("6080");var s=e("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"8adfb00a",null,!1,a["a"],void 0);i["default"]=l.exports},6080:function(t,i,e){"use strict";var a=e("6d29"),n=e.n(a);n.a},"6d29":function(t,i,e){var a=e("9bba");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("286d0108",a,!0,{sourceMap:!1,shadowMode:!1})},"9bba":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'uni-page-body[data-v-8adfb00a]{height:100%;overflow:hidden}.page[data-v-8adfb00a]{height:100%;overflow:hidden}.scrollList[data-v-8adfb00a]{flex:1}.search-bar[data-v-8adfb00a]{display:flex;align-items:center;position:relative;padding:%?27?% %?30?% %?35?%;background-color:#fff}.search-bar-form[data-v-8adfb00a]{flex:1;position:relative;border-radius:%?32?%;background:#f2f5f7}.search-bar-box[data-v-8adfb00a]{display:flex;align-items:center;position:relative;padding-left:%?20?%;padding-right:%?20?%;height:%?64?%;z-index:1}.search-bar-input[data-v-8adfb00a]{line-height:normal;width:100%;padding-left:%?20?%;font-size:%?30?%;color:#333}.phcolor[data-v-8adfb00a]{font-size:%?30?%}.icon-clear[data-v-8adfb00a]{height:%?38?%}.icon-clear .tui-icon-class[data-v-8adfb00a]{display:block}.search-bar-label[data-v-8adfb00a]{height:%?64?%;display:flex;justify-content:center;align-items:center;position:absolute;top:0;right:0;bottom:0;left:0;z-index:2;border-radius:%?32?%;color:#ccc;background:#f2f5f7}.icon-search[data-v-8adfb00a]{position:relative;height:%?26?%;margin-right:%?20?%;font-size:inherit}.search-bar-text[data-v-8adfb00a]{font-size:%?30?%;line-height:%?32?%}.cancel-btn[data-v-8adfb00a]{padding-left:%?30?%}.search-result[data-v-8adfb00a]::before{display:none}.search-result[data-v-8adfb00a]::after{display:none}.tui-list-cell[data-v-8adfb00a]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}.tui-list-cell-hover[data-v-8adfb00a]{background-color:#eee!important}.tui-list-cell-navigate[data-v-8adfb00a]{width:100%;position:relative;padding:%?30?% 0 %?30?% %?30?%;font-size:%?28?%;color:#333}.tui-list-cell-navigate[data-v-8adfb00a]::after{content:"";position:absolute;border-bottom:%?1?% solid #eaeef1;-webkit-transform:scaleY(.5);transform:scaleY(.5);bottom:0;right:0;left:%?30?%}.current-city[data-v-8adfb00a]{padding:0 %?30?% %?30?%;background:#fff}.tui-icon-class[data-v-8adfb00a]{margin-right:%?10?%}.current-city .title[data-v-8adfb00a]{font-size:%?24?%;line-height:%?24?%;color:#999}.city-name[data-v-8adfb00a]{display:flex;align-items:center;margin-top:%?17?%;font-size:%?30?%;font-weight:700;line-height:%?30?%;color:#333}.hot-city .title[data-v-8adfb00a]{height:%?48?%!important;padding-left:%?30?%;font-size:%?24?%!important;line-height:%?48?%!important;color:#999;background:#f2f5f7!important}.city-names[data-v-8adfb00a]{display:flex;flex-wrap:wrap;justify-content:space-between;align-content:space-between;width:%?630?%;padding:%?12?% %?90?% %?26?% %?30?%;background:#fff}.city-name-item[data-v-8adfb00a]{display:flex;justify-content:center;align-items:center;width:%?140?%;height:%?56?%;margin-top:%?16?%;\n\t/* border: solid 1rpx #ccc; */border-radius:%?28?%;font-size:%?28?%;color:#333;position:relative}.city-name-item[data-v-8adfb00a]::before{content:"";position:absolute;width:200%;height:200%;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;left:0;top:0;border-radius:%?56?%;border:1px solid #ccc}.tap-city[data-v-8adfb00a]{color:#fff;background:#5677fc\n\t/* border: solid 1rpx #5677fc; */}.tui-list[data-v-8adfb00a]{background-color:#fff;position:relative;width:100%;display:flex;flex-direction:column;padding-bottom:env(safe-area-inset-bottom)}.tui-list-cell-divider[data-v-8adfb00a]{height:%?48?%;padding-left:%?30?%;font-size:%?24?%;color:#999;background:#f2f5f7;padding:0 %?30?%;display:flex;align-items:center}.tui-indexed-list-bar[data-v-8adfb00a]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;z-index:9999;position:absolute;top:%?132?%;right:0;padding-right:%?10?%;width:%?44?%}.tui-indexed-list-text[data-v-8adfb00a]{font-size:%?22?%;white-space:nowrap}.tui-indexed-list-bar.active[data-v-8adfb00a]{background-color:#c8c8c8}.tui-indexed-list-alert[data-v-8adfb00a]{position:absolute;z-index:20;width:%?160?%;height:%?160?%;left:50%;top:50%;margin-left:%?-80?%;margin-top:%?-80?%;border-radius:%?80?%;text-align:center;line-height:%?160?%;font-size:%?70?%;color:#fff;background-color:rgba(0,0,0,.5)}',""]),t.exports=i},e6de:function(t,i,e){"use strict";e("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("d3b7"),e("159b"),e("c975"),e("14d9");var a={data:function(){return{cityName:"",latitude:"",longitude:"",lists:[],touchmove:!1,touchmoveIndex:-1,titleHeight:0,indexBarHeight:0,indexBarItemHeight:0,scrollViewId:"",winHeight:0,inputShowed:!1,inputVal:"",hotCity:["北京","上海","广州","深圳","杭州","长沙","武汉","厦门","西安","昆明","成都","重庆"],searchResult:[]}},onLoad:function(t){var i=this,e=this;wx.authorize({scope:"scope.userFuzzyLocation",success:function(t){wx.getFuzzyLocation({type:"wgs84",success:function(t){e.$request.post("geocoder.locationscope",{latitude:t.latitude,longitude:t.longitude}).then((function(t){e.cityName=t.data.city,uni.setStorageSync("cityName",e.cityName)}))}})},fail:function(t){}}),e.$request.get("area.abc").then((function(t){e.lists=t.data})),setTimeout((function(){uni.getSystemInfo({success:function(t){var e=t.windowHeight,a=e-uni.upx2px(204);i.winHeight=e,i.indexBarHeight=a,i.indexBarItemHeight=a/25,i.titleHeight=uni.upx2px(132)}})}),50)},methods:{showInput:function(){this.inputShowed=!0},clearInput:function(){this.inputVal="",this.inputShowed=!1,this.searchResult=[],uni.hideKeyboard()},inputTyping:function(t){this.inputVal=t.detail.value,this.searchCity()},searchCity:function(){var t=this,i=[];this.lists.forEach((function(e,a){e.data.forEach((function(e,a){-1!==e.keyword.indexOf(t.inputVal.toLocaleUpperCase())&&i.push(e.cityName)}))})),this.searchResult=i},selectCity:function(t){var i=t.currentTarget.dataset.name;uni.setStorageSync("cityName",i),uni.navigateBack({delta:1})},touchStart:function(t){this.touchmove=!0;var i=t.touches[0].pageY,e=Math.floor((i-this.titleHeight)/this.indexBarItemHeight),a=this.lists[0===e?1:e];a&&(this.scrollViewId=a.letter,this.touchmoveIndex=e)},touchMove:function(t){var i=t.touches[0].pageY,e=Math.floor((i-this.titleHeight)/this.indexBarItemHeight),a=this.lists[0===e?1:e];a&&(this.scrollViewId=a.letter,this.touchmoveIndex=e)},touchEnd:function(){this.touchmove=!1,this.touchmoveIndex=-1},touchCancel:function(){this.touchmove=!1,this.touchmoveIndex=-1},handleClick:function(t){if(void 0!==t&&!this.touchmove){var i=this.lists[t];i&&(this.scrollViewId=i.letter,this.touchmoveIndex=t)}}},onPullDownRefresh:function(){setTimeout((function(){uni.stopPullDownRefresh()}),200)}};i.default=a}}]);