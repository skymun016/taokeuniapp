(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4abb2840"],{"0d6b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"icon-dialog",attrs:{title:e.dialogtitle,width:"800px",visible:e.show,"before-close":e.closeForm,"append-to-body":""},on:{"update:visible":function(t){e.show=t},open:e.open}},[a("el-form",{ref:"form",attrs:{size:e.size,model:e.form,rules:e.rules,"label-width":"mobile"!==e.$store.getters.device?"16%":"90px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"名称",prop:"area_name"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:"",placeholder:"请输入名称"},model:{value:e.form.area_name,callback:function(t){e.$set(e.form,"area_name",t)},expression:"form.area_name"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{"controls-position":"right","auto-complete":"off",clearable:"",min:0,placeholder:"排序"},model:{value:e.form.area_sort,callback:function(t){e.$set(e.form,"area_sort",t)},expression:"form.area_sort"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e.loading?a("span",[e._v("提 交 中...")]):a("span",[e._v("确 定")])]),a("el-button",{on:{click:e.closeForm}},[e._v("取 消")])],1)],1)],1)},n=[],o={name:"Areaupdate",components:{},props:{show:{type:Boolean,default:!1},opentype:{type:String,default:"add"},parent_id:{type:String,default:""},size:{type:String,default:"small"},info:{type:Object}},data:function(){return{dialogtitle:"",cidarray:[],form:{area_name:""},loading:!1,rules:{title:[{required:!0,message:"显示文字不能为空",trigger:"blur"}]}}},watch:{show:function(e){var t=this;e&&this.$api.post("/area/getField").then((function(e){t.cidarray=e.data.cidarray}))}},methods:{open:function(){"update"==this.opentype?(this.dialogtitle="修改",this.form=this.info):(this.dialogtitle="添加",this.form={area_sort:100,area_parent_id:this.parent_id})},submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.loading=!0,e.$api.post("/area/update",e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.$emit("refesh_list"),e.closeForm()})).catch((function(){e.loading=!1})))}))},closeForm:function(){this.$emit("update:show",!1),this.loading=!1,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()}}},r=o,s=a("2877"),l=Object(s["a"])(r,i,n,!1,null,null,null);t["default"]=l.exports},"333d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,i){return e/=i/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,a){var i=s(),n=e-i,l=20,c=0;t="undefined"===typeof t?500:t;var d=function e(){c+=l;var s=Math.easeInOutQuad(c,i,n,t);r(s),c<t?o(e):a&&"function"===typeof a&&a()};d()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50,100,200]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},d=c,p=(a("9eb2"),a("2877")),u=Object(p["a"])(d,i,n,!1,null,"f2098c9e",null);t["a"]=u.exports},"3e56":function(e,t,a){},5505:function(e,t,a){"use strict";a("5fce")},"5fce":function(e,t,a){},"9a95":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"app-toptool",attrs:{type:"flex"}},[a("el-col",{attrs:{span:16}},[a("Search",{attrs:{size:"mini","search-visible":e.searchVisible,"search-data":e.searchData,"search-form":e.searchForm},on:{"update:searchData":function(t){e.searchData=t},"update:search-data":function(t){e.searchData=t},refesh_list:e.searchgo}})],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"btn-group",staticStyle:{"margin-bottom":"11px",float:"right"}},[a("div",[e.checkPermission("/area/add")?a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("添加")]):e._e(),e.checkPermission("/area/delete")?a("el-button",{attrs:{type:"primary",disabled:e.multiple,size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.del(e.ids)}}},[e._v("删除 ")]):e._e()],1)])])],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"eltable",staticStyle:{width:"100%"},attrs:{"row-class-name":e.rowClass,"row-key":"id","header-cell-style":{background:"#eef1f6",color:"#606266"},border:!1,stripe:!0,data:e.list},on:{"selection-change":e.selection}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"42"}}),a("el-table-column",{attrs:{align:"center",type:"",property:"id",label:"编号","show-overflow-tooltip":"",width:"70"}}),a("el-table-column",{attrs:{align:"left",property:"area_name",label:"名称","show-overflow-tooltip":"",width:""}}),a("el-table-column",{attrs:{align:"left",property:"letter",label:"首字母","show-overflow-tooltip":"",width:""}}),a("el-table-column",{attrs:{align:"left",property:"keyword",label:"关键词","show-overflow-tooltip":"",width:""}}),a("el-table-column",{attrs:{align:"center",property:"area_sort",label:"排序","show-overflow-tooltip":"",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"排序"},on:{blur:function(a){return a.stopPropagation(),e.listUpdate(t.row,"area_sort")}},model:{value:t.row.area_sort,callback:function(a){e.$set(t.row,"area_sort",a)},expression:"scope.row.area_sort"}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id?a("div",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.goparent(t.row)}}},[e._v("下级地区 ")]),e.checkPermission("/area/update")?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.update(t.row)}}},[a("i",{staticClass:"el-icon-edit"}),e._v("修改")]):e._e()],1):e._e()]}}])})],1),a("Pagination",{attrs:{total:e.page_data.total,page:e.page_data.page,limit:e.page_data.limit},on:{"update:page":function(t){return e.$set(e.page_data,"page",t)},"update:limit":function(t){return e.$set(e.page_data,"limit",t)},pagination:e.index}})],1),a("Update",{attrs:{info:e.updateInfo,opentype:e.opentype,parent_id:e.parent_id,show:e.dialog.updateDialogStatus,size:"mini"},on:{"update:show":function(t){return e.$set(e.dialog,"updateDialogStatus",t)},refesh_list:e.index}})],1)},n=[],o=a("ade3"),r=(a("a15b"),a("d81d"),a("ee12")),s=a("333d"),l=a("0d6b"),c=a("cf45"),d={name:"Areaindex",components:{Search:r["a"],Pagination:s["a"],Update:l["default"]},data:function(){return{dialog:{updateDialogStatus:!1},ids:[],single:!0,multiple:!0,list:[],opentype:"add",parent_id:"",updateInfo:{},loading:!1,ws:{},filename:"",page_data:{limit:50,page:1,total:20},searchVisible:!0,searchForm:[],searchData:{}}},mounted:function(){this.index()},created:function(){this.index()},methods:{searchgo:function(){this.page_data.page=1,this.index()},index:function(){var e=this,t={limit:this.page_data.limit,page:this.page_data.page};Object.assign(t,this.searchData),Object.assign(t,Object(c["d"])(this.$route.fullPath)),this.loading=!0,this.parent_id=t.parent_id,this.$api.post("/area/index",t).then((function(t){e.list=t.data.data,e.page_data.total=t.data.total,e.loading=!1,1==e.page_data.page&&(e.searchForm=[{type:"Input",label:"关键词",prop:"keyword",width:"230px"}])}))},listUpdate:function(e,t){var a=this;e.id&&this.$api.post("/area/listUpdate",Object(o["a"])({id:e.id},t,e[t])).then((function(e){a.$message({message:"操作成功",type:"success"})}))},add:function(){this.opentype="add",this.dialog.updateDialogStatus=!0},update:function(e){var t=this;this.opentype="update";var a=e.id?e.id:this.ids.join(",");this.$api.post("/area/getInfo",{id:a}).then((function(e){t.dialog.updateDialogStatus=!0,t.updateInfo=e.data}))},goparent:function(e){var t=e.id?e.id:this.ids.join(",");this.parent_id=t,this.$router.push({path:"/area",query:{parent_id:t}}),this.index()},del:function(e){var t=this;Object(c["b"])({content:"确定要操作吗"}).then((function(){var a=e.id?e.id:t.ids.join(",");t.$api.post("/area/delete",{id:a}).then((function(e){t.$message({message:e.msg,type:"success"}),t.index()}))})).catch((function(){}))},selection:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!=e.length,this.multiple=!e.length},rowClass:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.ids.length;a++)if(t.id===this.ids[a])return"rowLight"}}},p=d,u=(a("cddf"),a("2877")),h=Object(u["a"])(p,i,n,!1,null,"91761db0",null);t["default"]=h.exports},"9eb2":function(e,t,a){"use strict";a("f028")},cddf:function(e,t,a){"use strict";a("3e56")},ee12:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.searchVisible?a("div",{staticStyle:{"margin-bottom":"15px"}},[a("el-form",{ref:"search",staticClass:"searchForm",attrs:{size:e.size,inline:""}},[e._l(e.searchForm,(function(t){return a("el-form-item",{key:t.prop},["Input"===t.type?a("el-input",{style:"width:"+t.width,attrs:{placeholder:t.label},model:{value:e.searchData[t.prop],callback:function(a){e.$set(e.searchData,t.prop,a)},expression:"searchData[item.prop]"}}):e._e(),"Select"===t.type?a("el-select",{style:"width:"+t.width,attrs:{placeholder:t.label,clearable:""},model:{value:e.searchData[t.prop],callback:function(a){e.$set(e.searchData,t.prop,a)},expression:"searchData[item.prop]"}},e._l(t.data,(function(e,t){return a("el-option",{key:t,attrs:{label:e.key,value:e.val}})})),1):e._e(),"treeSelect"===t.type?a("Treeselect",{style:"width:"+t.width,attrs:{"default-expand-level":1,options:t.data,normalizer:e.normalizer,"show-count":!0,placeholder:t.label},model:{value:e.searchData[t.prop],callback:function(a){e.$set(e.searchData,t.prop,a)},expression:"searchData[item.prop]"}}):e._e(),"datetime"===t.type?a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",clearable:"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchData[t.prop],callback:function(a){e.$set(e.searchData,t.prop,a)},expression:"searchData[item.prop]"}}):e._e()],1)})),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:e.size,icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")]),a("el-button",{attrs:{size:e.size,icon:"el-icon-refresh"},on:{click:e.searchReset}},[e._v("清除")])],1)],2)],1):e._e()},n=[],o=a("ca17"),r=a.n(o),s=(a("542c"),{name:"Search",components:{Treeselect:r.a},props:{labelWidth:{type:String,default:"100px"},size:{type:String,default:"mini"},searchForm:{type:Array,default:function(){return[]}},searchVisible:{type:Boolean}},data:function(){return{searchData:{}}},methods:{search:function(){this.$emit("update:searchData",this.searchData),this.$emit("refesh_list")},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.val,label:e.key,children:e.children}},searchReset:function(){this.searchData={},this.$emit("refesh_list",[])}}}),l=s,c=(a("5505"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,"1207ad43",null);t["a"]=d.exports},f028:function(e,t,a){}}]);